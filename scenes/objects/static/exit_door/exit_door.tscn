[gd_scene load_steps=8 format=3 uid="uid://bs6u4l08gmv0e"]

[ext_resource type="Script" uid="uid://dxygniad11rib" path="res://scenes/objects/static/exit_door/exit_door.gd" id="1_8q72p"]
[ext_resource type="Texture2D" uid="uid://py68luswwopo" path="res://scenes/objects/static/exit_door/exit.png" id="1_je4x7"]
[ext_resource type="PackedScene" uid="uid://bo14vsfgv7h33" path="res://scenes/objects/triggers/interaction/interaction_cube.tscn" id="3_pp4nk"]

[sub_resource type="PlaneMesh" id="PlaneMesh_5772m"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_8q72p"]
transparency = 1
albedo_texture = ExtResource("1_je4x7")

[sub_resource type="BoxShape3D" id="BoxShape3D_je4x7"]
size = Vector3(0.39917, 2.19775, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_pp4nk"]
bg_color = Color(0, 0, 0, 0.443137)

[node name="ExitDoor" type="Node3D" node_paths=PackedStringArray("confirm_ui", "idiot_ui")]
script = ExtResource("1_8q72p")
confirm_ui = NodePath("CanvasLayer/Confirm")
idiot_ui = NodePath("CanvasLayer/Idiot")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(-4.37114e-08, 1, 0, 4.37114e-08, 1.91069e-15, -1.42462, -1, -4.37114e-08, -6.22719e-08, 0, 1, 0)
mesh = SubResource("PlaneMesh_5772m")
surface_material_override/0 = SubResource("StandardMaterial3D_8q72p")

[node name="Area3D" type="Area3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0635986, 1.02759, 0)
shape = SubResource("BoxShape3D_je4x7")

[node name="InteractionCube" parent="." instance=ExtResource("3_pp4nk")]
transform = Transform3D(0.415, 0, 0, 0, 1.505, 0, 0, 0, 1, 0, 1.062, -0.09)
interaction_name = "exit cinema and finish movie"
interaction_keybind = "click"

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Confirm" type="PanelContainer" parent="CanvasLayer"]
visible = false
offset_right = 1152.0
offset_bottom = 648.0
theme_override_styles/panel = SubResource("StyleBoxFlat_pp4nk")

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/Confirm"]
layout_mode = 2
theme_override_constants/separation = 35
alignment = 1

[node name="RichTextLabel" type="RichTextLabel" parent="CanvasLayer/Confirm/VBoxContainer"]
layout_mode = 2
theme_override_colors/default_color = Color(1, 1, 1, 1)
text = "Are you sure you would like to exit the cinema and watch your movie?
When you leave, your movie will be complete and no further changes will be possible."
fit_content = true
horizontal_alignment = 1

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/Confirm/VBoxContainer"]
layout_mode = 2
theme_override_constants/separation = 41
alignment = 1

[node name="CompleteMovie" type="Button" parent="CanvasLayer/Confirm/VBoxContainer/HBoxContainer"]
layout_mode = 2
text = "Complete movie"

[node name="ContinueFilming" type="Button" parent="CanvasLayer/Confirm/VBoxContainer/HBoxContainer"]
layout_mode = 2
text = "Continue filming"

[node name="Idiot" type="PanelContainer" parent="CanvasLayer"]
offset_right = 1152.0
offset_bottom = 648.0
theme_override_styles/panel = SubResource("StyleBoxFlat_pp4nk")

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/Idiot"]
layout_mode = 2
theme_override_constants/separation = 35
alignment = 1

[node name="RichTextLabel" type="RichTextLabel" parent="CanvasLayer/Idiot/VBoxContainer"]
layout_mode = 2
theme_override_colors/default_color = Color(1, 1, 1, 1)
text = "You need to record a movie before leaving the cinema!"
fit_content = true
horizontal_alignment = 1

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/Idiot/VBoxContainer"]
layout_mode = 2
theme_override_constants/separation = 41
alignment = 1

[node name="Forgor" type="Button" parent="CanvasLayer/Idiot/VBoxContainer/HBoxContainer"]
layout_mode = 2
text = "whoops, i forgor"

[connection signal="body_entered" from="Area3D" to="." method="_on_area_3d_body_entered"]
[connection signal="interaction_triggered" from="InteractionCube" to="." method="_on_interaction_triggered"]
[connection signal="pressed" from="CanvasLayer/Confirm/VBoxContainer/HBoxContainer/CompleteMovie" to="." method="_on_complete_movie_pressed"]
[connection signal="pressed" from="CanvasLayer/Confirm/VBoxContainer/HBoxContainer/ContinueFilming" to="." method="_on_continue_filming_pressed"]
[connection signal="pressed" from="CanvasLayer/Idiot/VBoxContainer/HBoxContainer/Forgor" to="." method="_on_forgor_pressed"]
